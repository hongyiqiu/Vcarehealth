function cspm_nearby_locations(e,a,s,t,r){var a=a,i={location:origin[e],types:[a]};i="distance"!=r?jQuery.extend({},i,{radius:t}):jQuery.extend({},i,{rankBy:google.maps.places.RankBy.DISTANCE}),cspm_clear_nearby_markers(e),nearby_map_object[e].setZoom(9),jQuery("div#travel_mode_container_"+e).hide(),jQuery("div#cspm_directions_btn_container_"+e).hide(),jQuery("div#cspm_place_name_container_"+e).hide(),jQuery("div.cspm_nearby_map_directions_"+e).hide(),current_map_id=e,current_distance_unit=s,selected_proximity_id[e]=a,existing_places[e]=new Array,places_service_callback_limit=0;var _=new google.maps.places.PlacesService(nearby_map_object[e]);_.nearbySearch(i,cspm_places_service_callback)}function cspm_places_service_callback(e,a,s){var t="",r="";if(jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).html(),a!==google.maps.places.PlacesServiceStatus.OK){var i=progress_map_vars.places_api_status_codes;return void cspm_api_status_info(current_map_id,i,a,"Places API")}if(e.length>0){var _=selected_proximity_id[current_map_id],n=jQuery("div#"+_+"[data-map-id="+current_map_id+"]").attr("data-proximity-name");jQuery("div#cspm_nearby_cats_container_"+current_map_id).hide(),jQuery("div#cspm_nearby_places_list_"+current_map_id+" img.cspm_nearby_cat_list_img").attr("src",cspm_nearby_map.img_file_url+"nearby_white/"+_+".png"),jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nearby_cat_list_name").html(n),jQuery("div#cspm_nearby_places_list_"+current_map_id).show();for(var c=cspm_file_exists(cspm_nearby_map.place_markers_file_url+_+".png"),p=0;p<e.length;p++){var d=e[p].place_id;if(-1==jQuery.inArray(d,existing_places[current_map_id])&&-1!=jQuery.inArray(_,e[p].types)){if(existing_places[current_map_id].push(d),cspm_add_place_marker(current_map_id,_,e[p],current_distance_unit,c),t+='<div class="cspm_nearby_location_list_item cspm-row cspm_animated fadeInRight" data-place-type="'+_+'" data-place-id="'+d+'">',"undefined"!=typeof e[p].photos)var o=e[p].photos[0].getUrl({maxWidth:0,maxHeight:120});else var o=cspm_nearby_map.img_file_url+"default-img-sm.jpg";t+='<div class="cspm_show_place_details_'+current_map_id+' cspm_location_list_item_photo pull-left" data-place-id="'+d+'" data-place-name="'+n+'" data-map-id="'+current_map_id+'" style="background:url('+o+') center center"></div>',t+='<div class="cspm_location_list_item_details pull-left">',"undefined"!=typeof e[p].name&&(t+='<div class="cspm_place_name_list"><a class="cspm_show_place_details_'+current_map_id+' cspm_nearby_map_main_color hover" data-place-id="'+d+'" data-place-name="'+n+'" data-map-id="'+current_map_id+'">'+e[p].name+"</a></div>"),"undefined"!=typeof e[p].vicinity&&(t+='<div class="cspm_place_vicinity_list"><img src="'+cspm_nearby_map.img_file_url+'vicinity.png" />'+e[p].vicinity+"</div>"),"undefined"!=typeof e[p].geometry.location&&(cspm_distance_matrix(current_map_id,d,origin[current_map_id],e[p].geometry.location,current_distance_unit,"div.cspm_place_distance_list_"+d+" .cspm_place_distance_text"),t+='<div class="cspm_place_distance_list_'+d+'"><img src="'+cspm_nearby_map.img_file_url+'distance.png" /><span class="cspm_place_distance_text"><span class="wrapper"><span class="cssload-loader"></span></span></span></div>'),t+="<div>","undefined"!=typeof e[p].rating&&(r=cspm_stars(e[p].rating),t+='<div class="cspm_place_rating_list pull-left"><span class="cspm_stars_rating"><span style="width:'+r+'px;"></span></span></div>'),t+='<div class="cspm_nearby_route_list cspm_nearby_map_main_background hover cspm_border_radius cspm_border_shadow pull-right" data-map-id="'+current_map_id+'" data-place-id="'+d+'">'+cspm_nearby_map.the_word_route+' <img src="'+cspm_nearby_map.img_file_url+'directions.png" /></div>',t+='<div class="clearfix"></div>',t+="</div>",t+="</div>",t+='<div class="clearfix"></div>',t+="</div>",jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).append(t).scrollTop(),t=""}}return nearby_map[current_map_id].gmap3({get:{name:"marker",tag:current_map_id,all:!0,callback:function(e){if(jQuery("div#cspm_place_name_container_"+current_map_id).is(":visible")){var a=jQuery("div#cspm_nearby_map_"+current_map_id).attr("data-selected-place-id");jQuery.each(e,function(e,s){s.placeID!=a?s.setOpacity(.6):s.setOpacity(1)})}}},autofit:{}}),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nbr_places_found").html('<span class="wrapper"><span class="cssload-loader white"></span></span>'),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nbr_places_found").html("("+existing_places[current_map_id].length+")")},500)},500),s.hasNextPage?("undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+current_map_id,showSpinner:!0}),NProgress.start()),jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).on("scroll",function(){jQuery(this).scrollTop()+jQuery(this).innerHeight()>=jQuery(this)[0].scrollHeight&&setTimeout(function(){s.nextPage()},500)}),"undefined"!=typeof NProgress&&NProgress.done(),void 0):void jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).off("scroll")}}function cspm_add_place_marker(e,a,s,t,r){var i=s.geometry.location,_=s.name,n=s.place_id,c=t,p=origin[e],d="",o="",m=r?cspm_nearby_map.place_markers_file_url+a+".png":cspm_nearby_map.img_file_url+"destination.png";nearby_map[e].gmap3({marker:{latLng:i,title:_,tag:e,options:{icon:new google.maps.MarkerImage(m),opacity:1,placeID:n},callback:function(){d+='<div class="travel_modes_container cspm_box_shadow">',d+='<div id="driving" class="nearby_map_mode_'+e+' active cspm_nearby_map_main_background cspm_border_top_radius" data-map-id="'+e+'" data-travel-mode="DRIVING" data-units="'+c+'" data-origin="'+p+'" data-destination="'+i+'" data-place-name="'+_+'" data-place-id="'+n+'"><i class="travel-mode icon-driving"></i></div>',d+='<div id="transit" class="nearby_map_mode_'+e+' cspm_nearby_map_main_background" data-travel-mode="TRANSIT" data-map-id="'+e+'" data-units="'+c+'" data-origin="'+p+'" data-destination="'+i+'" data-place-name="'+_+'" data-place-id="'+n+'"><i class="travel-mode icon-transit"></i></div>',d+='<div id="walking" class="nearby_map_mode_'+e+' cspm_nearby_map_main_background" data-travel-mode="WALKING" data-map-id="'+e+'" data-units="'+c+'" data-origin="'+p+'" data-destination="'+i+'" data-place-name="'+_+'" data-place-id="'+n+'"><i class="travel-mode icon-walking"></i></div>',d+='<div id="bicycle" class="nearby_map_mode_'+e+' cspm_nearby_map_main_background cspm_border_bottom_radius" data-map-id="'+e+'" data-travel-mode="BICYCLING" data-units="'+c+'" data-origin="'+p+'" data-destination="'+i+'" data-place-name="'+_+'"><i class="travel-mode icon-bicycle"></i></div>',d+="</div>",o+='<div id="directions" class="nearby_directions_btn_'+e+' cspm_nearby_map_main_background cspm_border_radius cspm_box_shadow" data-status="open" data-map-id="'+e+'"><i class="icon-directions"></i></div>',o+='<div id="'+n+'" class="clear-both"></div>',jQuery(document).on("click",".cspm_nearby_route_list[data-place-id="+n+"]",function(){jQuery(this).hasClass("disabled")||(cspm_get_place_route(e,p,i,"DRIVING",c,_,n),jQuery("div#travel_mode_container_"+e).html(d),jQuery("div#cspm_directions_btn_container_"+e).html(o),jQuery("div#cspm_nearby_places_list_"+e+" div.cspm_nearby_location_list_item").removeClass("active"),jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]").addClass("active"),jQuery(".cspm_nearby_route_list[data-map-id="+e+"]").removeClass("disabled"),jQuery(this).addClass("disabled"))})},events:{click:function(){jQuery("div.nearby_directions_btn_"+e).removeClass("active").attr("data-status","open"),jQuery("div.cspm_nearby_map_directions_"+e).hide(),jQuery("div#cspm_nearby_places_list_"+e).show(),cspm_get_place_route(e,p,i,"DRIVING",c,_,n),jQuery("div#travel_mode_container_"+e).html(d),jQuery("div#cspm_directions_btn_container_"+e).html(o),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+e+" div.cspm_nearby_location_list_item").removeClass("active"),jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]").addClass("active");var a=jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]");a.length&&jQuery("div.cspm_nearby_location_list_items_container_"+e).scrollTo(a,1e3)},500),jQuery(".cspm_nearby_route_list[data-map-id="+e+"]").removeClass("disabled"),jQuery(".cspm_nearby_route_list[data-map-id="+e+"][data-place-id="+n+"]").addClass("disabled")}}}})}function cspm_get_place_details(e,a,s){var t="",r=(selected_proximity_id[e],s);jQuery("div.cspm_nearby_map_place_details_content_"+e).html("");var _=new google.maps.places.PlacesService(nearby_map_object[e]);_.getDetails({placeId:a,fields:["name","photo","rating","user_ratings_total","place_id","formatted_address","plus_code","geometry","website","international_phone_number","url","type","review"]},function(s,_){if(_!==google.maps.places.PlacesServiceStatus.OK){var n=progress_map_vars.places_api_status_codes;return void cspm_api_status_info(e,n,_,"Places API")}if(t+='<div class="cspm_close_place_details" data-map-id="'+e+'">',t+='<img src="'+cspm_nearby_map.img_file_url+'close.png" />',t+="</div>","undefined"!=typeof s.photos)var c=s.photos[0].getUrl({maxWidth:0,maxHeight:600});else var c=cspm_nearby_map.img_file_url+"default-img.jpg";if(t+='<div class="cspm_place_details_header text-center" style="background:url('+c+') center center no-repeat;">',t+='<div class="cspm_place_details_header_overlay"></div>',"undefined"!=typeof s.name&&(t+='<div class="cspm_place_title text-center">'+s.name+'<div class="cspm_place_type text-center">'+cspm_ucfirst(r)+"</div></div>"),"undefined"!=typeof s.rating&&"undefined"!=typeof s.user_ratings_total&&(t+='<div class="cspm_place_rating text-center"><img src="'+cspm_nearby_map.img_file_url+'one_star.png" class="cspm_one_star" />'+s.rating+" ("+s.user_ratings_total+" "+cspm_nearby_map.the_word_ratings+")</div>"),t+="</div>",t+='<div class="cspm_place_details_info_container">',t+='<div class="cspm_place_details_targets_container cspm_nearby_map_main_background text-center">',"undefined"!=typeof s.reviews&&(t+='<a data-target="#cspm_place_reviews_container_'+e+'" class="cspm_place_details_target cspm_target_'+e+'" data-map-id="'+e+'"><img src="'+cspm_nearby_map.img_file_url+'reviews_target.png" />'+cspm_nearby_map.the_word_reviews+"</a>"),"undefined"!=typeof s.photos&&(t+='<a data-target="#cspm_place_photos_container_'+e+'" class="cspm_place_details_target cspm_target_'+e+'" data-map-id="'+e+'"><img src="'+cspm_nearby_map.img_file_url+'photos_target.png" />'+cspm_nearby_map.the_word_photos+"</a>"),t+='<a class="cspm_place_details_target cspm_nearby_route_list" data-map-id="'+e+'" data-place-id="'+s.place_id+'"><img src="'+cspm_nearby_map.img_file_url+'route_target.png" />'+cspm_nearby_map.the_word_route+"</a>",t+='<div class="clearfix"></div>',t+="</div>",t+='<div class="cspm_place_details_content">',"undefined"!=typeof s.formatted_address&&(t+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'address.png" />'+s.formatted_address+"</div>"),"undefined"!=typeof s.plus_code&&"undefined"!=typeof s.plus_code.compound_code&&(t+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'plus-code.png" />'+s.plus_code.compound_code+"</div>"),"undefined"!=typeof s.geometry&&"undefined"!=typeof s.geometry.location&&(cspm_distance_matrix(e,a,origin[e],s.geometry.location,current_distance_unit,"div.cspm_place_distance_"+a+" .cspm_place_distance_text"),t+='<div class="cspm_place_details_item cspm_place_distance_'+a+'"><img src="'+cspm_nearby_map.img_file_url+'distance.png" /><span class="cspm_place_distance_text"><span class="wrapper"><span class="cssload-loader"></span></span></span></div>'),"undefined"!=typeof s.website&&(t+='<div class="cspm_place_details_item website"><img src="'+cspm_nearby_map.img_file_url+'website.png" /><a href="'+s.website+'" target="_blank" class="cspm_nearby_map_main_color hover">'+s.website+"</a></div>"),"undefined"!=typeof s.international_phone_number&&(t+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'tel.png" />'+s.international_phone_number+"</div>"),"undefined"!=typeof s.url&&(t+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'link.png" /><a href="'+s.url+'" target="_blank" class="cspm_nearby_map_main_color hover">'+cspm_nearby_map.google_map_link_text+"</a></div>"),"undefined"!=typeof s.types&&s.types.length>0){for(t+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'tag.png" /> '+cspm_nearby_map.appears_also_text+" ",i=0;i<s.types.length;i++)"undefined"!=typeof cspm_nearby_map[s.types[i]]&&(t+=cspm_nearby_map[s.types[i]],i<s.types.length-1&&(t+=", "));t+="</div>"}if(t+="</div>","undefined"!=typeof s.photos){t+='<div id="cspm_place_photos_container_'+e+'">',t+='<div class="cspm_place_photos_toggle cspm_nearby_map_main_background">',t+='<img src="'+cspm_nearby_map.img_file_url+'photos_target.png" />'+cspm_nearby_map.the_word_photos,t+="</div>",t+='<div class="cspm_place_photos_container">';var d=Math.round(s.photos.length/3);for(t+='<div id="place_img_container" class="cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-4 cspm-col-xs-4 place_img_container">',p=0;p<s.photos.length;p++){var o=s.photos[p].getUrl({maxWidth:0,maxHeight:600}),c=s.photos[p].getUrl({maxWidth:0,maxHeight:1e3});t+='<a href="'+c+'"><img src="'+o+'" class="img-responsive" /></a>',p!=d&&p!=2*d||(t+="</div>",t+='<div class="cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-4 cspm-col-xs-4 place_img_container">')}t+="</div>",t+='<div class="clearfix"></div>',t+="</div>",t+="</div>",setTimeout(function(){jQuery(".place_img_container a").simpleLightbox({fileExt:!1,captions:!1,disableScroll:!0,alertError:!0,spinner:!0});jQuery(document).on("click",".cspm_target_"+e,function(){var a=jQuery(this).attr("data-target");a.length&&jQuery(".cspm_nearby_map_place_details_container_"+e).scrollTo(a,1e3)})},500)}if("undefined"!=typeof s.reviews){for(t+='<div id="cspm_place_reviews_container_'+e+'" class="cspm_place_reviews_container">',t+='<div class="cspm_place_reviews_toggle cspm_nearby_map_main_background">',t+='<img src="'+cspm_nearby_map.img_file_url+'reviews_target.png" />'+cspm_nearby_map.the_word_reviews,t+="</div>",t+='<div class="cspm_place_reviews_content">',i=0;i<s.reviews.length;i++){if(t+='<div class="cspm_nearby_place_author_review">',t+='<div class="cspm_review_header">',"undefined"!=typeof s.reviews[i].author_name){if("undefined"!=typeof s.reviews[i].author_url)var m=s.reviews[i].author_url;else var m="#";t+='<span class="cspm_review_author_name pull-left"><a href="'+m+'" target="_blank" class="author_name cspm_nearby_map_main_color hover">'+s.reviews[i].author_name+"</a></span>"}if("undefined"!=typeof s.reviews[i].time){var l=cspm_time_converter(s.reviews[i].time);t+='<span class="cspm_review_date pull-left">'+l+"</span>"}"undefined"!=typeof s.reviews[i].rating&&(stars_width=cspm_stars(s.reviews[i].rating),t+='<span class="cspm_review_rating pull-right cspm_stars_rating"><span style="width:'+stars_width+'px;"></span></span>'),t+='<div class="clearfix"></div>',t+="</div>",t+='<div class="cspm_review_text">',"undefined"!=typeof s.reviews[i].text&&(t+=s.reviews[i].text),t+="</div>",t+="</div>"}"undefined"!=typeof s.url&&s.reviews.length>=4&&(t+='<div class="cspm_load_more_reviews text-center"><a href="'+s.url+'" target="_blank" class="cspm_nearby_map_main_color hover">'+cspm_nearby_map.more_reviews_text+"</a></div>"),t+="</div>",t+="</div>",setTimeout(function(){jQuery(".cspm_review_text").readmore({speed:500,collapsedHeight:100,moreLink:'<a href="#" class="text-right cspm_nearby_map_main_color hover" style="margin-top:10px">'+cspm_nearby_map.show_more_text+"</a>",lessLink:'<a href="#" class="text-right cspm_nearby_map_main_color hover" style="margin-top:10px">'+cspm_nearby_map.show_less_text+"</a>"})},500)}t+="</div>",jQuery("div.cspm_nearby_map_place_details_container_"+e).show(),jQuery("div.cspm_nearby_map_place_details_content_"+e).append(t),t=""})}function cspm_get_place_route(e,a,s,t,r,i,_){var a=a,s=s,n=t,r=r,c="",p="",d="",o="";if(jQuery("div#travel_mode_container_"+e+", div#cspm_directions_btn_container_"+e).show(),"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start()),""==a||""==s){var m=cspm_nearby_map.no_results_msg;return cspm_popup_msg(e,"warning","",m),console.warn('PROGRESS MAP, "Directions API": (NOT_FOUND) At least one of the locations specified in the request\'s origin, destination, or waypoints could not be geocoded.'),void("undefined"!=typeof NProgress&&NProgress.done())}nearby_map[e].gmap3({getroute:{options:{origin:a,destination:s,travelMode:google.maps.DirectionsTravelMode[n.toUpperCase()],unitSystem:google.maps.UnitSystem[r.toUpperCase()]},callback:function(a,s){if("undefined"!=typeof a&&"OK"===s){var t=a.routes[0],r=t.legs[0].distance.text,n=t.legs[0].duration.text;o+='<div class="cspm_place_name text-center">'+i+"</div><hr />",o+='<div class="text-center">',o+='<span class="cspm_place_distance"><i class="cspm_place_distance_icon"></i>'+r+"</span>",o+='<span class="cspm_place_travel_time"><i class="cspm_place_travel_time_icon"></i>'+n+"</span>",o+="</div>",jQuery("div#cspm_place_name_container_"+e).show().html(o),nearbyDirectionsDisplay[e].setDirections(a),"undefined"!=typeof NProgress&&NProgress.set(.5),c+='<div class="cspm_start_address cspm_nearby_map_main_background"><i class="cspm_nearby_start_icon"></i><span>'+t.legs[0].start_address+"</span></div>",d+='<div class="cspm_direction_steps cspm_box_shadow cspm_animated fadeIn">';for(var m=0;m<t.legs[0].steps.length;m++){d+='<div class="cspm_nearby_step">',""!=t.legs[0].steps[m].maneuver&&(d+='<div class="text-left pull-left cspm_maneuver_icon"><i class="maneuver_sprite '+t.legs[0].steps[m].maneuver+'"></i></div>'),d+='<div class="text-left pull-left cspm_route_distance cspm_nearby_map_main_color"><small>'+t.legs[0].steps[m].distance.text+", "+t.legs[0].steps[m].duration.text+"</small></div>",d+='<div class="clearfix"></div>',d+='<div class="text-left cspm_route_step">'+t.legs[0].steps[m].instructions+"</div>",d+="</div>"}d+="</div>",p+='<div class="cspm_destination_address cspm_nearby_map_main_background"><i class="cspm_nearby_end_icon"></i><span>'+t.legs[0].end_address+"</span></div>",jQuery("div.nearby_directions_btn_"+e).show(),jQuery("div.cspm_nearby_map_directions_"+e+" div.cspm_start_address_container").html(c),jQuery("div.cspm_nearby_map_directions_"+e+" div.cspm_direction_steps_container").html(d),jQuery("div.cspm_nearby_map_directions_"+e+" div.cspm_destination_address_container").html(p),nearby_map[e].gmap3({get:{name:"marker",tag:e,all:!0,callback:function(a){jQuery.each(a,function(a,s){s.placeID!=_?s.setOpacity(.6):(s.setOpacity(1),jQuery("div#cspm_nearby_map_"+e).attr("data-selected-place-id",_))})}}})}else{o+='<div class="cspm_place_name text-center">'+i+"</div>",jQuery("div#cspm_place_name_container_"+e).show().html(o),jQuery("div.nearby_directions_btn_"+e).hide().removeClass("active").attr("data-status","open"),jQuery("div.cspm_nearby_map_directions_"+e).hide(),jQuery("div#cspm_nearby_places_list_"+e).show();var l=progress_map_vars.directions_api_status_codes;cspm_api_status_info(e,l,s,"Directions API")}"undefined"!=typeof NProgress&&NProgress.done()}}})}function cspm_distance_matrix(e,a,s,t,r,i){setTimeout(function(){nearby_map[e].gmap3({getdistance:{options:{origins:[s],destinations:[t],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem[r.toUpperCase()]},callback:function(a,s){var t="";if("undefined"!=typeof a&&"OK"===s){if("undefined"!=typeof a.rows[0].elements[0]&&s===a.rows[0].elements[0].status){var r=a.rows[0].elements[0];t=r.distance.text+" "+cspm_nearby_map.the_word_away+" ("+r.duration.text+")",jQuery(i).html(t)}}else{var _=progress_map_vars.distance_matrix_api_status_codes;cspm_api_status_info(e,_,s,"Distance Matrix API")}}}})},1e3)}function cspm_init_nearby_directions_display(e){var a={suppressMarkers:!0,suppressInfoWindows:!0,draggable:!1,preserveViewport:!1,suppressBicyclingLayer:!0};null!=nearbyDirectionsDisplay[e]&&(nearbyDirectionsDisplay[e].setMap(null),nearbyDirectionsDisplay[e]=null),nearbyDirectionsDisplay[e]=new google.maps.DirectionsRenderer(a),nearbyDirectionsDisplay[e].setMap(nearby_map_object[e])}function cspm_clear_nearby_markers(e){nearby_map[e].gmap3({clear:{tag:e}}),jQuery("div#cspm_nearby_map_"+e).attr("data-selected-place-id","false"),cspm_init_nearby_directions_display(e)}function cspm_reset_nearby_layout(e,a){jQuery("div#cspm_nearby_places_list_"+e).hide(),jQuery("div.cspm_nearby_map_place_details_container_"+e).hide(),jQuery("div.cspm_nearby_map_directions_"+e).hide(),jQuery("div#travel_mode_container_"+e).hide(),jQuery("div#cspm_directions_btn_container_"+e).hide(),jQuery("div#cspm_place_name_container_"+e).hide(),jQuery("div.cspm_nearby_location_list_items_container_"+e).html(""),jQuery("div#cspm_nearby_cats_container_"+e).show(),a&&(jQuery("div#cspm_nearby_address_locator_"+e).show(),jQuery("input[name=cspm_nearby_address_"+e+"]").select().trigger("focus"))}function cspm_stars(e){return 16*Math.max(0,Math.min(5,parseFloat(e)))}function cspm_ucfirst(e){e+="";var a=e.charAt(0).toUpperCase();return a+e.substr(1)}function cspm_time_converter(e){var a=new Date(1e3*e),s=[cspm_nearby_map.jan,cspm_nearby_map.feb,cspm_nearby_map.mar,cspm_nearby_map.apr,cspm_nearby_map.may,cspm_nearby_map.jun,cspm_nearby_map.jul,cspm_nearby_map.aug,cspm_nearby_map.sep,cspm_nearby_map.oct,cspm_nearby_map.nov,cspm_nearby_map.dec],t=a.getFullYear(),r=s[a.getMonth()],i=a.getDate(),_=i+" "+r+" "+t;return _}function cspm_file_exists(e){var a=this.window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;if(!a)throw new Error("XMLHttpRequest not supported");return a.open("HEAD",e,!0),a.send(null),200==a.status}var origin={},nearby_map={},nearby_map_object={},nearbyDirectionsDisplay={},current_map_id,current_distance_unit,selected_proximity_id={},existing_places={};!function(e){var a=null;e(document).on("click","div[class^=proximity_place_]",function(){var s=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+s,showSpinner:!0}),NProgress.start());var t=e("div#cspm_nearby_map_"+s).attr("data-selected-system-unit"),r=e("div#cspm_nearby_map_"+s).attr("data-radius"),i=e("div#cspm_nearby_map_"+s).attr("data-rankby");a=e(this).attr("id"),cspm_nearby_locations(s,a,t,r,i),e("div#cspm_nearby_map_"+s).attr("data-current-screen","places_list"),"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click","img.cspm_back_to_nearby_cats",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start()),e("div#cspm_nearby_places_list_"+a).hide(),e("div#cspm_nearby_cats_container_"+a).show(),e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats"),cspm_clear_nearby_markers(a),nearby_map_object[a].panTo(origin[a]),nearby_map_object[a].setCenter(origin[a]),e("div#travel_mode_container_"+a).hide(),e("div#cspm_directions_btn_container_"+a).hide(),e("div#cspm_place_name_container_"+a).hide(),e("div.cspm_nearby_location_list_items_container_"+a).html(""),"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click","[class^=cspm_show_place_details_]",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start());var s=e(this).attr("data-place-id"),t=e(this).attr("data-place-name");e("div#cspm_nearby_places_list_"+a+" div.cspm_nearby_location_list_item").removeClass("active"),e("div#cspm_nearby_places_list_"+a+" div.cspm_nearby_location_list_item[data-place-id="+s+"]").addClass("active"),cspm_get_place_details(a,s,t),e("div#cspm_nearby_map_"+a).attr("data-current-screen","place_details"),e("div#cspm_nearby_places_list_"+a).hide(),"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click","div.cspm_close_place_details",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start()),e("div.cspm_nearby_map_place_details_container_"+a).hide(),e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list"),e("div#cspm_nearby_places_list_"+a).show(),"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click","div[class^=nearby_map_mode_]",function(){if(!e(this).hasClass("active")){var a=e(this).attr("data-map-id");e("div.nearby_map_mode_"+a).removeClass("active"),e(this).addClass("active");var s=e(this).attr("data-origin").slice(1,-1).split(","),t=e(this).attr("data-destination").slice(1,-1).split(",");cspm_get_place_route(a,new google.maps.LatLng(s[0],s[1]),new google.maps.LatLng(t[0],t[1]),e(this).attr("data-travel-mode"),e(this).attr("data-units"),e(this).attr("data-place-name"),e(this).attr("data-place-id"))}}),e(document).on("click","div[class^=nearby_directions_btn_]",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start());var s=e(this).attr("data-status");"open"==s?(e(this).addClass("active").attr("data-status","hide"),e("div#cspm_nearby_map_"+a).attr("data-current-screen","place_directions"),e("div#cspm_nearby_places_list_"+a).hide(),e("div.cspm_nearby_map_place_details_container_"+a).hide()):(e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list"),e(this).removeClass("active").attr("data-status","open"),e("div#cspm_nearby_places_list_"+a).show()),e("div.cspm_nearby_map_directions_"+a).toggle(),"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click",".cspm_get_geoloc",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start());var s=e("div#cspm_nearby_map_"+a).attr("data-selected-system-unit"),t=e("div#cspm_nearby_map_"+a).attr("data-radius"),r=e("div#cspm_nearby_map_"+a).attr("data-rankby"),i=e("div#cspm_nearby_map_"+a).attr("data-single-proximity-id"),_=e("div#cspm_nearby_map_"+a).attr("data-count-place-types");nearby_map[a].gmap3({getgeoloc:{callback:function(n){if(n)"undefined"!=typeof NProgress&&NProgress.set(.5),origin[a]=n,nearby_map[a].gmap3({marker:{latLng:n,tag:"csnm_user_marker_"+a,options:{icon:new google.maps.MarkerImage(cspm_nearby_map.img_file_url+"marker.png"),draggable:!0},events:{dragend:function(){nearby_map[a].gmap3({get:{name:"marker",tag:"csnm_user_marker_"+a,callback:function(n){"undefined"!=typeof n.position&&(origin[a]=n.position,cspm_reset_nearby_layout(a,!1),cspm_clear_nearby_markers(a),setTimeout(function(){nearby_map_object[a].panTo(origin[a]),nearby_map_object[a].setCenter(origin[a])},500),1==_?(cspm_nearby_locations(a,i,s,t,r),e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list")):e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats"))}}})}}},map:{options:{center:n}}}),e("#cspm_nearby_address_locator_"+a).hide(),e("div.cspm_btn_reset_nearby_map_"+a).show(),1==_?(cspm_nearby_locations(a,i,s,t,r),e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list")):e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats");else{var c=progress_map_vars.geoErrorTitle,p=progress_map_vars.geoErrorMsg;cspm_popup_msg(a,"error",c,"<br />"+p),console.log("PROGRESS MAP: "+progress_map_vars.geoDeprecateMsg)}"undefined"!=typeof NProgress&&NProgress.done()}}})}),e(document).on("click",".cspm_get_address",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start());var s=e("input[name=cspm_nearby_address_"+a+"]").val(),t=e("div#cspm_nearby_map_"+a).attr("data-selected-system-unit"),r=e("div#cspm_nearby_map_"+a).attr("data-radius"),i=e("div#cspm_nearby_map_"+a).attr("data-rankby"),_=e("div#cspm_nearby_map_"+a).attr("data-single-proximity-id"),n=e("div#cspm_nearby_map_"+a).attr("data-count-place-types");if(s){"undefined"!=typeof NProgress&&NProgress.set(.5);var c=new google.maps.Geocoder;c.geocode({address:s},function(s,c){if(c===google.maps.GeocoderStatus.OK){var p=s[0].geometry.location.lat(),d=s[0].geometry.location.lng();origin[a]=s[0].geometry.location,setTimeout(function(){cspm_center_map_at_point(nearby_map[a],a,p,d,"zoom"),nearby_map[a].gmap3({marker:{latLng:s[0].geometry.location,tag:"csnm_user_marker_"+a,options:{icon:new google.maps.MarkerImage(cspm_nearby_map.img_file_url+"marker.png"),draggable:!0},events:{dragend:function(){nearby_map[a].gmap3({get:{name:"marker",tag:"csnm_user_marker_"+a,callback:function(s){"undefined"!=typeof s.position&&(origin[a]=s.position,cspm_reset_nearby_layout(a,!1),cspm_clear_nearby_markers(a),setTimeout(function(){nearby_map_object[a].panTo(origin[a]),nearby_map_object[a].setCenter(origin[a])},500),1==n?(cspm_nearby_locations(a,_,t,r,i),e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list")):e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats"))}}})}}}}),e("#cspm_nearby_address_locator_"+a).hide(),e("div.cspm_btn_reset_nearby_map_"+a).show(),1==n?(cspm_nearby_locations(a,_,t,r,i),e("div#cspm_nearby_map_"+a).attr("data-current-screen","places_list")):e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats")},500)}else{var o=progress_map_vars.geocoding_api_status_codes;cspm_api_status_info(a,o,c,"Geocoding API")}})}else{var p=cspm_nearby_map.no_address;cspm_popup_msg(a,"warning","",p),e("input[name=cspm_nearby_address_"+a+"]").trigger("focus")}"undefined"!=typeof NProgress&&NProgress.done()}),e(document).on("click","div[class^=cspm_btn_reset_nearby_map_]",function(){var a=e(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+a,showSpinner:!0}),NProgress.start()),e(this).hide(),"undefined"!=typeof NProgress&&NProgress.set(.5),cspm_reset_nearby_layout(a,!0),cspm_clear_nearby_markers(a),nearby_map[a].gmap3({clear:{tag:"csnm_user_marker_"+a}}),setTimeout(function(){nearby_map_object[a].panTo(origin[a]),nearby_map_object[a].setCenter(origin[a])},500),e("div#cspm_nearby_map_"+a).attr("data-current-screen","nearby_cats"),"undefined"!=typeof NProgress&&NProgress.done()})}(jQuery);